!function(){var e={name:"oojs",namespace:"",classes:{},noop:function(){},$oojs:function(){var e={};if("undefined"!=typeof window&&window&&"undefined"!=typeof document&&document?(this.runtime="browser",e.global=window):(this.runtime="node",e.global=global),e.proxyName="proxy",e.path="node"===this.runtime?process.cwd()+"/src/":"/src/","undefined"!=typeof $oojs_config)for(var t in $oojs_config)t&&$oojs_config.hasOwnProperty(t)&&(e[t]=$oojs_config[t]);this.global=e.global,e.proxyName&&(Function.prototype[e.proxyName]=this.proxy),this.setPath(e.path),this.global.oojs=this.global.oojs||this},path:{},pathCache:{},getPath:function(e){var t=e?e.split("."):!1,s=this.path;if(t)for(var n=0,i=t.length;i>n;n++){var o=t[n].toLowerCase();if(!s[o])break;s=s[o]}return s.pathValue},setPath:function(e,t){var s=this.path;if("object"!=typeof e){if(t)for(var n=e.split("."),i=0,o=n.length;o>i;i++){var r=n[i].toLowerCase();s[r]=s[r]||{pathValue:s.pathValue},s=s[r]}else t=e;s.pathValue=t,this.pathCache={}}else for(var a in e)a&&e.hasOwnProperty(a)&&this.setPath(a,e[a])},getClassPath:function(e){if(!this.pathCache[e]){this.pathCache[e]=this.getPath(e)+e.replace(/\./gi,"/")+".js";var t=this.getPath(e),s=t.length-1;t.lastIndexOf("\\")!==s&&t.lastIndexOf("/")!==s&&(t+="/"),this.pathCache[e]=t+e.replace(/\./gi,"/")+".js"}return this.pathCache[e]},loadDeps:function(e,t){t=t||{};var s=e.__deps,n=(e.__namespace,[]);for(var i in s)if(s.hasOwnProperty(i)&&s[i]){var o;if("string"!=typeof s[i]?(e[i]=s[i],e[i]&&e[i].__name&&(o=e[i].__full)):(o=s[i],e[i]=this.find(o)),!o||t[o])continue;if(t[o]=!0,e[i])e[i].__deps&&(n=n.concat(this.loadDeps(e[i],t)));else{if("node"===this.runtime)try{e[i]=require(this.getClassPath(o))}catch(r){n.push(o)}e[i]||n.push(o)}}return n},fastClone:function(e){var t=function(){};t.prototype=e;var s=new t;return s},deepClone:function(e,t){"number"!=typeof t&&(t=10);var s,n=t-1;if(t>0)if(e instanceof Date)s=new Date,s.setTime(e.getTime());else if(e instanceof Array){s=[];for(var i=0,o=e.length;o>i;i++)s[i]=this.deepClone(e[i],n)}else if("object"==typeof e){s={};for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];s[r]=this.deepClone(a,n)}}else s=e;else s=e;return s},proxy:function(e,t,s,n,i,o,r){var a=[t];"undefined"!=typeof s&&a.push(s),"undefined"!=typeof n&&a.push(n),"undefined"!=typeof i&&a.push(i),"undefined"!=typeof o&&a.push(o),"undefined"!=typeof r&&a.push(r);var h=e,f="function"==typeof this?this:a.shift();return function(e,t,s,n,i){var o=[];return"undefined"!=typeof e&&o.push(e),"undefined"!=typeof t&&o.push(t),"undefined"!=typeof s&&o.push(s),"undefined"!=typeof n&&o.push(n),"undefined"!=typeof i&&o.push(i),f.apply(h,o.concat(a))}},find:function(e){var t,s=e.split(".");t=this.classes[s[0]];for(var n=1,i=s.length;i>n;n++){if(!t||!t[s[n]]){t=null;break}t=t[s[n]]}return t},reload:function(e){var t=this.find(e);if(t)if(t.__registed=!1,"node"===this.runtime){var s=this.getClassPath(e);delete require.cache[require.resolve(s)],t=require(s)}else t=this.define(t);else t=this.using(e);return t},create:function(e,t,s,n,i,o){"string"==typeof e&&(e=this.using(e));var r=new e.__constructor(t,s,n,i,o);return r},using:function(e){var t=this.find(e);return t||"node"===this.runtime&&(require(this.getClassPath(e)),t=this.find(e)),t},define:function(e){var t=e.name||"__tempName",s=e.namespace||"";e.__name=t,e.__namespace=s,e.__full=s.length>1?s+"."+t:t,e.__deps=e.deps,e.__oojs=this,e.__constructor=function(e,t,s,n,i){if(this.__clones&&this.__clones.length>0)for(var o=0,r=this.__clones.length;r>o;o++){var a=this.__clones[o];this[a]=this.__oojs.deepClone(this[a])}this.__constructorSource(e,t,s,n,i)},e.__constructorSource=e[t]||this.noop,e.__staticSource=e["$"+t]||this.noop,e.__staticUpdate=function(){var t=[];for(var s in this)if(this.hasOwnProperty(s)){var n=this[s];"object"!=typeof n||null===n||"deps"===s||0===s.indexOf("__")||e.__deps&&e.__deps[s]||t.push(s)}this.__clones=t,this.__constructor.prototype=this},e.__static=function(){this.__staticSource(),this.__staticUpdate()};for(var n,i=!1,o=!1,r=s.split("."),a=r.length,h=this.classes,f=0;a>f;f++)n=r[f],n&&(h[n]=h[n]||{},h=h[n]);h[t]=h[t]||{};var p=h;if(h=h[t],h.__name&&h.__registed){if(h.__registed){i=!0;for(var u in e)u&&e.hasOwnProperty(u)&&("undefined"==typeof h[u]||h[u]===this.noop)&&(o=!0,h[u]=e[u])}}else e.__registed=!0,p[t]=e;if(e=p[t],!i||o){var l=this.loadDeps(e);if(l.length>0){if(this.loader=this.loader||this.using("oojs.loader"),"browser"!==this.runtime||!this.loader)throw new Error('class "'+e.name+'" loadDeps error:'+l.join(","));this.loader.loadDepsBrowser(e,l)}else e.__static()}return"node"===this.runtime&&arguments.callee.caller.arguments[2]&&(arguments.callee.caller.arguments[2].exports=e),e}};e.define(e)}();